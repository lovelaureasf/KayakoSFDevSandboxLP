{"version":3,"sources":["webpack:///js/279.27076db8.chunk.js","webpack:///./src/main/js/apps/projects/components/DefaultPageSelector.tsx"],"names":["webpackJsonp","2121","module","__webpack_exports__","__webpack_require__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_react__","__WEBPACK_IMPORTED_MODULE_1_prop_types__","n","__WEBPACK_IMPORTED_MODULE_2__AllProjects__","__WEBPACK_IMPORTED_MODULE_3__helpers_storage__","__WEBPACK_IMPORTED_MODULE_4__api_components__","__extends","this","extendStatics","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","arguments","length","call","DefaultPageSelector","_super","props","_this","state","componentDidMount","defineIfShouldBeRedirected","componentDidUpdate","prevProps","location","shouldBeRedirected","context","router","replace","pathname","shouldForceSorting","query","sort","keys","setState","undefined","currentUser","isLoggedIn","filter","ps","then","r","paging","total","render","_a","isFavorite","contextTypes","isRequired"],"mappings":"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","file":"js/279.27076db8.chunk.js","sourcesContent":["webpackJsonp([279],{\n\n/***/ 2121:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_prop_types__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_prop_types___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_prop_types__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__AllProjects__ = __webpack_require__(402);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__helpers_storage__ = __webpack_require__(252);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__api_components__ = __webpack_require__(47);\n\n\nvar __extends = this && this.__extends || function () {\n    var extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (d, b) {\n        d.__proto__ = b;\n    } || function (d, b) {\n        for (var p in b) {\n            if (b.hasOwnProperty(p)) d[p] = b[p];\n        }\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\nvar __assign = this && this.__assign || Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) {\n            if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n        }\n    }\n    return t;\n};\n/*\r\n * SonarQube\r\n * Copyright (C) 2009-2017 SonarSource SA\r\n * mailto:info AT sonarsource DOT com\r\n *\r\n * This program is free software; you can redistribute it and/or\r\n * modify it under the terms of the GNU Lesser General Public\r\n * License as published by the Free Software Foundation; either\r\n * version 3 of the License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\r\n * Lesser General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Lesser General Public License\r\n * along with this program; if not, write to the Free Software Foundation,\r\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\r\n */\n\n\n\n\n\nvar DefaultPageSelector = function (_super) {\n    __extends(DefaultPageSelector, _super);\n    function DefaultPageSelector(props) {\n        var _this = _super.call(this, props) || this;\n        _this.state = {};\n        return _this;\n    }\n    DefaultPageSelector.prototype.componentDidMount = function () {\n        this.defineIfShouldBeRedirected();\n    };\n    DefaultPageSelector.prototype.componentDidUpdate = function (prevProps) {\n        if (prevProps.location !== this.props.location) {\n            this.defineIfShouldBeRedirected();\n        } else if (this.state.shouldBeRedirected === true) {\n            this.context.router.replace(__assign({}, this.props.location, { pathname: '/projects/favorite' }));\n        } else if (this.state.shouldForceSorting != null) {\n            this.context.router.replace(__assign({}, this.props.location, { query: __assign({}, this.props.location.query, { sort: this.state.shouldForceSorting }) }));\n        }\n    };\n    DefaultPageSelector.prototype.defineIfShouldBeRedirected = function () {\n        var _this = this;\n        if (Object.keys(this.props.location.query).length > 0) {\n            // show ALL projects when there are some filters\n            this.setState({ shouldBeRedirected: false, shouldForceSorting: undefined });\n        } else if (!this.context.currentUser.isLoggedIn) {\n            // show ALL projects if user is anonymous\n            if (!this.props.location.query || !this.props.location.query.sort) {\n                // force default sorting to last analysis date\n                this.setState({ shouldBeRedirected: false, shouldForceSorting: '-analysis_date' });\n            } else {\n                this.setState({ shouldBeRedirected: false, shouldForceSorting: undefined });\n            }\n        } else if (__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__helpers_storage__[\"m\" /* isFavoriteSet */])()) {\n            // show FAVORITE projects if \"favorite\" setting is explicitly set\n            this.setState({ shouldBeRedirected: true, shouldForceSorting: undefined });\n        } else if (__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__helpers_storage__[\"n\" /* isAllSet */])()) {\n            // show ALL projects if \"all\" setting is explicitly set\n            this.setState({ shouldBeRedirected: false, shouldForceSorting: undefined });\n        } else {\n            // otherwise, request favorites\n            this.setState({ shouldBeRedirected: undefined, shouldForceSorting: undefined });\n            __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__api_components__[\"w\" /* searchProjects */])({ filter: 'isFavorite', ps: 1 }).then(function (r) {\n                // show FAVORITE projects if there are any\n                _this.setState({ shouldBeRedirected: r.paging.total > 0, shouldForceSorting: undefined });\n            });\n        }\n    };\n    DefaultPageSelector.prototype.render = function () {\n        var _a = this.state,\n            shouldBeRedirected = _a.shouldBeRedirected,\n            shouldForceSorting = _a.shouldForceSorting;\n        if (shouldBeRedirected == null || shouldBeRedirected === true || shouldForceSorting != null) {\n            return null;\n        } else {\n            return __WEBPACK_IMPORTED_MODULE_0_react__[\"createElement\"](__WEBPACK_IMPORTED_MODULE_2__AllProjects__[\"a\" /* default */], { isFavorite: false, location: this.props.location });\n        }\n    };\n    DefaultPageSelector.contextTypes = {\n        currentUser: __WEBPACK_IMPORTED_MODULE_1_prop_types__[\"object\"].isRequired,\n        router: __WEBPACK_IMPORTED_MODULE_1_prop_types__[\"object\"].isRequired\n    };\n    return DefaultPageSelector;\n}(__WEBPACK_IMPORTED_MODULE_0_react__[\"PureComponent\"]);\n/* harmony default export */ __webpack_exports__[\"default\"] = (DefaultPageSelector);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// js/279.27076db8.chunk.js","/*\n * SonarQube\n * Copyright (C) 2009-2017 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport AllProjects from './AllProjects';\nimport { isFavoriteSet, isAllSet } from '../../../helpers/storage';\nimport { searchProjects } from '../../../api/components';\n\ninterface Props {\n  location: { pathname: string; query: { [x: string]: string } };\n}\n\ninterface State {\n  shouldBeRedirected?: boolean;\n  shouldForceSorting?: string;\n}\n\nexport default class DefaultPageSelector extends React.PureComponent<Props, State> {\n  static contextTypes = {\n    currentUser: PropTypes.object.isRequired,\n    router: PropTypes.object.isRequired\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {};\n  }\n\n  componentDidMount() {\n    this.defineIfShouldBeRedirected();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.location !== this.props.location) {\n      this.defineIfShouldBeRedirected();\n    } else if (this.state.shouldBeRedirected === true) {\n      this.context.router.replace({ ...this.props.location, pathname: '/projects/favorite' });\n    } else if (this.state.shouldForceSorting != null) {\n      this.context.router.replace({\n        ...this.props.location,\n        query: {\n          ...this.props.location.query,\n          sort: this.state.shouldForceSorting\n        }\n      });\n    }\n  }\n\n  defineIfShouldBeRedirected() {\n    if (Object.keys(this.props.location.query).length > 0) {\n      // show ALL projects when there are some filters\n      this.setState({ shouldBeRedirected: false, shouldForceSorting: undefined });\n    } else if (!this.context.currentUser.isLoggedIn) {\n      // show ALL projects if user is anonymous\n      if (!this.props.location.query || !this.props.location.query.sort) {\n        // force default sorting to last analysis date\n        this.setState({ shouldBeRedirected: false, shouldForceSorting: '-analysis_date' });\n      } else {\n        this.setState({ shouldBeRedirected: false, shouldForceSorting: undefined });\n      }\n    } else if (isFavoriteSet()) {\n      // show FAVORITE projects if \"favorite\" setting is explicitly set\n      this.setState({ shouldBeRedirected: true, shouldForceSorting: undefined });\n    } else if (isAllSet()) {\n      // show ALL projects if \"all\" setting is explicitly set\n      this.setState({ shouldBeRedirected: false, shouldForceSorting: undefined });\n    } else {\n      // otherwise, request favorites\n      this.setState({ shouldBeRedirected: undefined, shouldForceSorting: undefined });\n      searchProjects({ filter: 'isFavorite', ps: 1 }).then(r => {\n        // show FAVORITE projects if there are any\n        this.setState({ shouldBeRedirected: r.paging.total > 0, shouldForceSorting: undefined });\n      });\n    }\n  }\n\n  render() {\n    const { shouldBeRedirected, shouldForceSorting } = this.state;\n    if (shouldBeRedirected == null || shouldBeRedirected === true || shouldForceSorting != null) {\n      return null;\n    } else {\n      return <AllProjects isFavorite={false} location={this.props.location} />;\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/main/js/apps/projects/components/DefaultPageSelector.tsx"],"sourceRoot":""}