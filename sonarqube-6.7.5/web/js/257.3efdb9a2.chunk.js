webpackJsonp([257],{2150:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(10),i=a(721),r=a(2592),o=a(11),u=function(t){return a.i(o.getQualityGatesAppState)(t)},s=function(t){return{updateStore:function(e){return t(a.i(i.u)(e))},addQualityGate:function(e){return t(a.i(i.v)(e))},deleteQualityGate:function(e){return t(a.i(i.m)(e))}}};e.default=a.i(n.connect)(u,s)(r.a)},2162:function(t,e,a){"use strict";function n(){return a.i(b.getJSON)("/api/qualitygates/app").catch(q.a)}function i(){return a.i(b.getJSON)("/api/qualitygates/list").then(function(t){return t.qualitygates.map(function(e){return E({},e,{id:e.id,isDefault:e.id===t.default})})},q.a)}function r(t){return a.i(b.getJSON)("/api/qualitygates/show",{id:t}).catch(q.a)}function o(t){return a.i(b.postJSON)("/api/qualitygates/create",{name:t})}function u(t){return a.i(b.post)("/api/qualitygates/destroy",{id:t})}function s(t,e){return a.i(b.post)("/api/qualitygates/rename",{id:t,name:e})}function l(t,e){return a.i(b.postJSON)("/api/qualitygates/copy",{id:t,name:e})}function c(t){return a.i(b.post)("/api/qualitygates/set_as_default",{id:t}).catch(q.a)}function p(t){return a.i(b.post)("/api/qualitygates/unset_default",{id:t}).catch(q.a)}function d(t,e){return a.i(b.postJSON)("/api/qualitygates/create_condition",E({},e,{gateId:t}))}function f(t){return a.i(b.postJSON)("/api/qualitygates/update_condition",t)}function m(t){return a.i(b.post)("/api/qualitygates/delete_condition",{id:t})}function h(t){return a.i(b.getJSON)("/api/qualitygates/get_by_project",{project:t}).then(function(t){return t.qualityGate&&{id:t.qualityGate.id,isDefault:t.qualityGate.default,name:t.qualityGate.name}})}function y(t,e){return a.i(b.post)("/api/qualitygates/select",{gateId:t,projectKey:e}).catch(q.a)}function g(t,e){return a.i(b.post)("/api/qualitygates/deselect",{gateId:t,projectKey:e}).catch(q.a)}function v(t){return a.i(b.getJSON)("/api/qualitygates/application_status",{application:t})}e.o=n,e.c=i,e.f=r,e.p=o,e.l=u,e.n=s,e.m=l,e.h=c,e.g=p,e.i=d,e.j=f,e.k=m,e.d=h,e.a=y,e.b=g,e.e=v;var b=a(19),q=a(42),E=this&&this.__assign||Object.assign||function(t){for(var e,a=1,n=arguments.length;a<n;a++){e=arguments[a];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t}},2168:function(t,e,a){"use strict";var n=a(0),i=(a.n(n),a(4)),r=(a.n(i),this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function n(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}()),o=function(t){function e(e){var n=t.call(this,e)||this;return n.getPosition=function(){var t=n.container&&n.container.getBoundingClientRect();return t?{top:window.pageYOffset+t.top,left:window.pageXOffset+t.left}:{top:0,left:0}},n.debouncedOnResize=a.i(i.debounce)(function(){return n.forceUpdate()},250),n}return r(e,t),e.prototype.componentDidMount=function(){this.forceUpdate(),window.addEventListener("resize",this.debouncedOnResize)},e.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.debouncedOnResize)},e.prototype.render=function(){var t=this;return n.createElement("div",{className:this.props.className,ref:function(e){return t.container=e}},this.props.children(this.getPosition()))},e}(n.PureComponent);e.a=o},2204:function(t,e,a){function n(t){return t&&(t.__esModule?t.default:t)}var i=a(5);t.exports=(i.default||i).template({1:function(t,e,i,r){return(0,this.escapeExpression)(n(a(1)).call(t,"save",{name:"t",hash:{},data:r}))},3:function(t,e,i,r){return(0,this.escapeExpression)(n(a(1)).call(t,"copy",{name:"t",hash:{},data:r}))},5:function(t,e,i,r){return(0,this.escapeExpression)(n(a(1)).call(t,"create",{name:"t",hash:{},data:r}))},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,i,r){var o,u=this.escapeExpression,s=this.lambda,l='<form id="quality-gate-form">\n  <div class="modal-head">\n    <h2>'+u(n(a(1)).call(t,"quality_gates",null!=t?t.method:t,{name:"t",hash:{},data:r}))+'</h2>\n  </div>\n  <div class="modal-body">\n    <div class="js-modal-messages"></div>\n    <div class="modal-field">\n      <label for="quality-gate-form-name">'+u(n(a(1)).call(t,"name",{name:"t",hash:{},data:r}))+' <em class="mandatory">*</em></label>\n      <input id="quality-gate-form-name" type="text" size="50" maxlength="100" value="'+u(s(null!=t?t.name:t,t))+'" required>\n    </div>\n  </div>\n  <div class="modal-foot">\n    <button id="quality-gate-form-submit">\n      ';return o=n(a(12)).call(t,null!=t?t.method:t,"rename",{name:"eq",hash:{},fn:this.program(1,r),inverse:this.noop,data:r}),null!=o&&(l+=o),l+="\n      ",o=n(a(12)).call(t,null!=t?t.method:t,"copy",{name:"eq",hash:{},fn:this.program(3,r),inverse:this.noop,data:r}),null!=o&&(l+=o),l+="\n      ",o=n(a(12)).call(t,null!=t?t.method:t,"create",{name:"eq",hash:{},fn:this.program(5,r),inverse:this.noop,data:r}),null!=o&&(l+=o),l+'\n    </button>\n    <a id="quality-gate-form-cancel" href="#" class="js-modal-close">'+u(n(a(1)).call(t,"cancel",{name:"t",hash:{},data:r}))+"</a>\n  </div>\n</form>\n"},useData:!0})},2589:function(t,e,a){"use strict";function n(t){var e=t.organization,n=t.qualityGates;return r.a.createElement("div",{className:"list-group"},n.map(function(t){return r.a.createElement(o.Link,{key:t.id,to:a.i(s.p)(t.id,e&&e.key),activeClassName:"active",className:"list-group-item","data-id":t.id},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{className:"text-top"},t.name),r.a.createElement("td",{className:"text-top thin nowrap spacer-left"},t.isDefault&&r.a.createElement("span",{className:"badge pull-right"},a.i(u.translate)("default")))))))}))}e.a=n;var i=a(0),r=a.n(i),o=a(9),u=a(2),s=a(34)},2590:function(t,e,a){"use strict";function n(t){function e(t){t.preventDefault(),new o.a({onAdd:i}).render()}var n=t.canEdit,i=t.onAdd;return r.a.createElement("header",{className:"page-header"},r.a.createElement("h1",{className:"page-title"},a.i(u.translate)("quality_gates.page")),n&&r.a.createElement("div",{className:"page-actions"},r.a.createElement("div",{className:"button-group"},r.a.createElement("button",{id:"quality-gate-add",onClick:e},a.i(u.translate)("create")))))}e.a=n;var i=a(0),r=a.n(i),o=a(2595),u=a(2)},2592:function(t,e,a){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=a(0),u=a.n(o),s=a(6),l=a.n(s),c=a(30),p=a.n(c),d=a(2590),f=a(2589),m=a(2168),h=a(2162),y=a(2),g=a(34),v=a(2725),b=(a.n(v),function(){function t(t,e){var a=[],n=!0,i=!1,r=void 0;try{for(var o,u=t[Symbol.iterator]();!(n=(o=u.next()).done)&&(a.push(o.value),!e||a.length!==e);n=!0);}catch(t){i=!0,r=t}finally{try{!n&&u.return&&u.return()}finally{if(i)throw r}}return a}return function(e,a){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()),q=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),E=function(t){function e(){var t,a,r,o;n(this,e);for(var u=arguments.length,s=Array(u),l=0;l<u;l++)s[l]=arguments[l];return a=r=i(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(s))),r.state={},o=a,i(r,o)}return r(e,t),q(e,[{key:"componentDidMount",value:function(){this.fetchQualityGates()}},{key:"fetchQualityGates",value:function(){var t=this;Promise.all([a.i(h.o)(),a.i(h.c)()]).then(function(e){var n=b(e,2),i=n[0],r=n[1],o=t.props,u=o.organization;(0,o.updateStore)(Object.assign({},i,{qualityGates:r})),r&&1===r.length&&!i.edit&&t.context.router.replace(a.i(g.p)(r[0].id,u&&u.key))})}},{key:"handleAdd",value:function(t){var e=this.props,n=e.addQualityGate,i=e.organization,r=this.context.router;n(t),r.push(a.i(g.p)(t.id,i&&i.key))}},{key:"render",value:function(){var t=this,e=this.props,n=e.children,i=e.qualityGates,r=e.edit,o=e.organization,s=a.i(y.translate)("quality_gates.page"),l=u.a.createElement(f.a,{organization:o,qualityGates:i});return u.a.createElement("div",{id:"quality-gates-page",className:"layout-page"},u.a.createElement(p.a,{defaultTitle:s,titleTemplate:"%s - "+s}),u.a.createElement(m.a,{className:"layout-page-side-outer"},function(e){var a=e.top;return u.a.createElement("div",{className:"layout-page-side",style:{top:a}},u.a.createElement("div",{className:"layout-page-side-inner"},u.a.createElement("div",{className:"layout-page-filters"},u.a.createElement(d.a,{canEdit:r,onAdd:t.handleAdd.bind(t)}),i&&l)))}),null!=i&&u.a.Children.map(n,function(t){return u.a.cloneElement(t,{organization:o})}))}}]),e}(o.Component);E.contextTypes={router:l.a.object.isRequired},e.a=E},2595:function(t,e,a){"use strict";var n=a(44),i=a(2204),r=a.n(i),o=a(2162),u=a(55);e.a=n.a.extend({template:r.a,onFormSubmit:function(){n.a.prototype.onFormSubmit.apply(this,arguments),this.disableForm(),this.sendRequest()},sendRequest:function(){var t=this,e=this.$("#quality-gate-form-name").val();a.i(o.p)(e).then(function(e){t.destroy(),t.options.onAdd(e)},function(e){t.enableForm(),a.i(u.a)(e).then(function(e){return t.showErrors([{msg:e}])})})},serializeData:function(){return{method:"create"}}})},2675:function(t,e,a){e=t.exports=a(27)(void 0),e.push([t.i,".quality-gate-section{max-width:1440px}.quality-gate-section+.quality-gate-section{margin-top:10px;padding-top:20px}",""])},2725:function(t,e,a){var n=a(2675);"string"==typeof n&&(n=[[t.i,n,""]]);var i={};i.transform=void 0;a(28)(n,i);n.locals&&(t.exports=n.locals)}});
//# sourceMappingURL=257.3efdb9a2.chunk.js.map