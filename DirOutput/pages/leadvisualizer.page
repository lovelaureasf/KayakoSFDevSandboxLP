<apex:page standardController="lead" extensions="LeadVisualizerController" sidebar="false" showHeader="false">
    <apex:form >
    <html>
        <head>
             <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css" rel="stylesheet" media="screen"/>
             <link href="//getbootstrap.com/examples/signin/signin.css" rel="stylesheet" media="screen"/>
                       <style type="text/css">
                table, th, td {
                                border: 1px solid black;
                                border-collapse: collapse;
                                font-family: Arial,Helvetica,sans-serif;
                                
                               
                }
                .table{
                    margin-bottom:0px;
                    
                    
                }
                .table>thead>tr>th, .table>tbody>tr>th, .table>tfoot>tr>th, .table>thead>tr>td, .table>tbody>tr>td, .table>tfoot>tr>td { padding: 0px;border-color:rgb(160,160,160);}
                
                
                .top-header{
                   background: white;
                   border: white !important;
                
                }
                
                .left-pane{
                    border-style: solid;
                    border-top-color: white !important;
                    border-bottom-color: white !important;
                    text-align: right;
                    width:11%;
                    
                }
                
                .deactivated{
                    background-color:rgb(242,242,242);color:rgb(172,172,173);
                
                }
                
                .activated{
                    background-color:rgb(255,255,255);color:#000000;
                }
                
                .green{
                    background-color: rgb(178,212,132);
                }
                
                .red{
                    background-color: rgb(248,106,110);
                }
                
            </style>
           

        </head>
        
        <body style="text-align:center;background-color:white;padding-top:0px;padding-bottom:0px;">
            <table class="table table-bordered" style="width:100%;border-top-style:hidden;border-left-style:hidden;border-right:none;">
                <!-- table header starts here --->
                <tr>
                    <td  class="left-pane" style="background:white;border:white;">
                        
                    </td>
                    <td class="top-header" >
                        MQL
                    </td>
                    <td class="top-header" >
                        SAL
                   </td>
                   
                   <td class="top-header" >
                       Opportunity
                   </td>
                   <td class="top-header" style="border-right-style:hidden;">
                       Subscription
                   </td>
                </tr>
                <!--- table header ends here--->
                <tr>
                    <td class="left-pane">
                        Owner &amp; Age &nbsp;
                    </td>
                    <td>
                        <!-- MQL Owner -->
                       <apex:outputPanel rendered="{!if(ownerOfMQL!=null ,true,false)}">{!ownerOfMQL} </apex:outputPanel>
                       <apex:outputPanel rendered="{!if(ownerOfMQL!=null && l.DaysInMQL__c!=null ,true,false)}"> -</apex:outputPanel>
                       <apex:outputPanel rendered="{!if(l.DaysInMQL__c!=null  ,true,false)}">  {!l.DaysInMQL__c} day<apex:outputText value="s" rendered="{!if(l.DaysInMQL__c>1 || l.DaysInMQL__c==0,true,false)}"></apex:outputText>  </apex:outputPanel>
                   </td>
                    <td class="{!if(l.Stage__c=='SAL' || l.Stage__c=='SQL' || l.Stage__c=='SDL' || o.StageName=='Demo' || o.StageName=='Proposal/Price Quote' || o.StageName=='Negotiation/Review' || (l.Rejected__c==true && l.Stage__c=='SRL' && l.Unresponsive__c==true),'activated','deactivated' )}">
                        <!--SAL Owner -->
                         
                         <apex:outputPanel rendered="{!if(ownerOfSAL!=null,true,false)}"> {!ownerOfSAL} </apex:outputPanel>
                         <apex:outputPanel rendered="{!if(ownerOfSAL!=null && l.DaysInSAL__c!=null ,true,false)}"> -</apex:outputPanel>
                         <apex:outputPanel rendered="{!if(l.DaysInSAL__c!=null ,true,false)}"> {!l.DaysInSAL__c} day<apex:outputText value="s" rendered="{!if(l.DaysInSAL__c>1 || l.DaysInSAL__c==0 ,true,false)}"></apex:outputText>  </apex:outputPanel>
                    </td>
                    
                    <td class="{!if(l.Stage__c=='SDL' || o.StageName=='Demo' || o.StageName=='Proposal/Price Quote' || o.StageName=='Negotiation/Review' || o.StageName=='Value Proposition','activated','deactivated' )}">
                        <!--Opportunity Owner --->
                        <apex:outputPanel rendered="{!if(l.DaysInSRL__c!=null && opportunityOwner.Name!=null ,true,false)}"> {!opportunityOwner.Name} -  days </apex:outputPanel>
                        
                    </td>
                    <td class="{!if(sub==false,'deactivated','')}" style="border-right:solid rgb(160,160,160);">
                        <!-- Subscription Owner -->
                        <apex:outputPanel rendered="{!if(l.DaysInSDL__c!=null,true,false)}"> {!l.DaysInSDL__c} days </apex:outputPanel>
                       
                    </td>
                </tr>
                <tr>
                   <td class="left-pane">
                        Status/Stage &nbsp;
                    </td>
                    <td class="{!if((l.Status=='Open' || l.Status=='Contacted' || l.Status=='Interested' || l.Status=='Qualified' || l.Status=='Converted') || (l.Rejected__c==true && l.Stage__c=='SRL') && (l.Stage__c='SAL'|| l.Stage__c='SQL' || l.Stage__c='MQL' ),'green',if(l.Status=='Unresponsive' && l.Stage__c='SAL','red',if(l.Stage__c='SDL' || l.Stage__c='SRL','red','')))}">
                        Open
                    </td>
                    <td>
                        <!--  inner table for SAL sub levels -->
                        <table style="width:100%;" class="table table-bordered">
                            <tr>
                                <td class="{!if((l.Status=='Open' || l.Status=='Contacted' || l.Status=='Interested' || l.Status=='Qualified' || l.Status=='Converted') && (l.Stage__c='SAL'|| l.Stage__c='SQL' ),'green',if(l.Rejected__c==true && l.Stage__c=='SRL' && l.Unresponsive__c==true,'red',if(l.Stage__c='SDL' || l.Unresponsive__c==true,'red','deactivated')))}" style="border-top-style:hidden;border-left-style:hidden;border-bottom-style:hidden;">
                                    Open
                                </td>
                                <td class="{!if((l.Status=='Contacted' || l.Status=='Interested' || l.Status=='Qualified' || l.Status=='Converted') && (l.Stage__c='SAL'|| l.Stage__c='SQL' || l.Status=='Converted'),'green',if(l.Rejected__c==true && l.Stage__c=='SRL' && l.Unresponsive__c==true,'red',if(l.Stage__c='SDL' || l.Unresponsive__c==true,'red','deactivated')))}" style="border-right-style:hidden;border-top-style:hidden;border-bottom-style:hidden;">
                                    Contacted
                                </td>
                               
                            </tr>
                        </table>
                        <!-- inner table ends -->
                    </td>
                   
                    <td>
                        <!--  inner table for opportunity sub levels -->
                        <table style="width:100%;" class="table table-bordered">
                            <tr>
                                <td class="{!if(o.StageName='Value Proposition' || o.StageName='Demo' || o.StageName='Proposal/Price Quote' || o.StageName='Negotiation/Review','green','deactivated')}" style="border-top-style:hidden;border-left-style:hidden;border-right-style:solid;border-bottom-style:hidden;border-right-style:solid;">
                                    Created
                                </td>
                                <td class="{!if(o.StageName='Value Proposition' || o.StageName='Demo' || o.StageName='Proposal/Price Quote' || o.StageName='Negotiation/Review','green','deactivated')}" style="border-top-style:hidden;border-right-style:solid;border-bottom-style:hidden;border-right-style:solid;">
                                    Value Proposition
                                </td>
                                <td class="{!if( o.StageName='Demo' || o.StageName='Proposal/Price Quote' || o.StageName='Negotiation/Review','green','deactivated')}" style="border-top-style:hidden;border-bottom-style:hidden;border-right-style:solid;">
                                    Demo
                                </td>
                                <td class="{!if( o.StageName='Proposal/Price Quote' || o.StageName='Negotiation/Review','green','deactivated')}" style="border-top-style:hidden;border-bottom-style:hidden;border-right-style:solid;">
                                    Proposal
                                </td>
                                <td class="{!if(o.StageName='Negotiation/Review','green','deactivated')}" style="border-top-style:hidden;border-bottom-style:hidden;">
                                    Negotiation
                                </td>
                                <td class="{!if(o.StageName='Negotiation/Review','green','deactivated')}" style="border-top-style:hidden;border-right-style:hidden;border-bottom-style:hidden;">
                                    Won
                                </td>
                            </tr>
                            
                        </table>
                        <!-- inner table ends --> 
                    </td>
                    <td class="{!if(sub==false,'deactivated','')}" style="border-right:solid rgb(160,160,160);">
                        <!-- ID and MMR---> 
                    </td>
                </tr>
                <tr>
                   <td class="left-pane">
                       Rejection &nbsp;
                    </td>
                    <td class="{!if(l.Rejected__c==true && l.Stage__c=='SRL' && l.Unresponsive__c!=true && (mql==true || l.Status=='Nurture'),'red','deactivated')}">
                                    SRL    
                    </td>
                    <td>
                        <!--inner table for SAL rejection row -->
                        <table style="width:100%;" class="table table-bordered">
                            <tr>
                                
                                <td class="{!if((l.Status=='Unresponsive' || l.Unresponsive__c==true) && (l.Stage__c='SAL' || l.Stage__c='SRL'),'red','deactivated')}" style="border-left-style:hidden;border-bottom-style:hidden;border-top-style:hidden;">
                                    Unresponsive
                                </td>
                                <td class="{!if(l.Rejected__c==true && l.Stage__c=='SRL' && l.Unresponsive__c==true,'red','deactivated')}" style="border-bottom-style:hidden;border-right-style:hidden;border-top-style:hidden;">
                                    SRL
                                </td>
                            </tr>
                        </table>
                        <!-- inner table ends-->
                    </td>
                    
                   
                    <td class="{!if(sub==false,'deactivated','')}">
                        Lost
                    </td>
                    <td class="deactivated" style="border-right:solid rgb(160,160,160);">
                        &nbsp;
                    </td>
                </tr>
                <tr style="display:{!if(l.Stage__c=='SRL' && l.Unresponsive__c==true && l.Status=='Purchased','','none')}">
                    <td class="green" colspan="7">
                       <center> PURCHASED DIRECTLY </center>
                    </td>
                </tr>
            </table>
        </body>
    </html>
    </apex:form>
</apex:page>